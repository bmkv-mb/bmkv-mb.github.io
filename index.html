<!DOCTYPE html>
<html>
  <head>
    <title>Neukunde Anmeldung</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/signature_pad/1.3.5/signature_pad.min.js" integrity="sha512-kw/nRM/BMR2XGArXnOoxKOO5VBHLdITAW00aG8qK4zBzcLVZ4nzg7/oYCaoiwc8U9zrnsO9UHqpyljJ8+iqYiQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="apple-touch-icon" type="image/png" href="https://cpwebassets.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png">
  
    <meta name="apple-mobile-web-app-title" content="CodePen">

    <link rel="shortcut icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico">

    <link rel="mask-icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/logo-pin-b4b4269c16397ad2f0f7a01bcdf513a1994f4c94b8af2f191c09eb0d601762b1.svg" color="#111">

    <script src="https://cpwebassets.codepen.io/assets/common/stopExecutionOnTimeout-2c7831bb44f98c1391d6a4ffda0e1fd302503391ca806e7fcc7b9b87197aec26.js"></script>
      
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script src="https://superal.github.io/canvas2image/canvas2image.js"></script>
    
	<body>

	<div class="testbox">
	  <form onsubmit="return !! (SaveAndSend());" action=""  id="email_send">

		<div class="banner">
			<h1>Anmeldung</h1>
		</div>
		<div style="padding-top: 10px; padding-bottom: 10px; ">
			<h3>Personalien Neukunden</h3>
		</div>
		<div class="colums" style="padding-bottom:10px;">
			<div style="padding-bottom:10px;" >
				<legend>Anrede</legend> 
				<div class="radio_highlight">
					<input  style="width:auto;" type="radio" name="gender" value="Frau" required> <span class="ref">Frau</span></input>
				</div>
				<div class="radio_highlight">
					<input  style="width:auto;" type="radio" name="gender" value="Herr"> <span>Herr</span></input>
				</div>
			</div>
				<!-- Empty -->
			<div>
			</div>
			<div class="item">
				<label for="fname"> Vorname<span>*</span></label>
				<input onchange="CreateEmailElement()" id="fname" type="text" name="fname" required/>
			</div>
			<div class="item">
				<label for="lname"> Nachname<span>*</span></label>
				<input onchange="CreateEmailElement()" id="lname" type="text" name="lname" required/>
			</div>
			<div class="item">
				<label for="address1">Addresse<span>*</span></label>
				<input id="address1" type="text"   name="address1" required/>
			</div>
			<div class="item">
				<label for="postfach">Postfach</label>
				<input id="postfach" type="text"   name="postfach"/>
			</div>
			<div class="item">
				<label for="plz">PLZ<span>*</span></label>
				<input id="plz" type="text" name="plz" required/>
			</div>
			<div class="item">
				<label for="city">Ort<span>*</span></label>
				<input id="city" type="text"   name="city" required/>
			</div>
			<div class="item">
				<label for="eaddress">Email-Addresse<span>*</span></label>
				<input onchange="CreateEmailElement()" id="eaddress" type="email" name="eaddress"  required/>
			</div>
			<div class="item">
				<label for="phone">Telefonummer<span>*</span></label>
				<input id="phone" type="text" name="phone"  required/>
			</div>
			<div class="item">
				<label for="iban">IBAN<span>*</span></label>
				<input id="iban" type="text" minlength="26" maxlength="26" name="iban" placeholder="CH01 2222 3333 4444 5555 6" required/ >
			</div>
			<div class="item">
				<label for="bankname">Name der Bank<span>*</span></label>
				<input id="bankname" type="text" name="bankname" required/>
			</div>
			<div style="padding-top: 10px; padding-bottom:10px;">
				<input class="input_checkbox" type="checkbox" id="checkbox_alternative_address" onclick="showMe('hidden_input')"> Abweichende Kontendaten</input>
			</div>
			<div>
				<!-- Empty -->
			</div>
			<div class="item" id="hidden_input" style="display: none;" name="hidden">
				<label for="alt_vorname">Vorname<span>*</span></label>
				<input id="alt_vorname" type="text" name="alt_vorname" />
			</div>
			<div class="item" id="hidden_input" style="display: none;" name="hidden">
				<label for="alt_nachname"> Nachname<span>*</span></label>
				<input id="alt_nachname" type="text" name="alt_nachname"/>
			</div>
			<div class="item" id="hidden_input" style="display: none;" name="hidden">
				<label for="alt_address">Addresse<span>*</span></label>
				<input id="alt_address" type="text" name="alt_address" />
			</div>
			<div class="item" id="hidden_input" style="display: none;" name="hidden">
				<label for="alt_postfach">Postfach</label>
				<input id="alt_postfach" type="text" name="alt_postfach" />
			</div>
			<div class="item" id="hidden_input" style="display: none;" name="hidden">
				<label for="alt_plz">PLZ<span>*</span></label>
				<input id="alt_plz" type="text" name="alt_plz" />
			</div>
			<div class="item" id="hidden_input" style="display: none;" name="hidden">
				<label for="alt_city">Ort<span>*</span></label>
				<input id="alt_city" type="text" name="alt_city" />
			</div>
		</div>
		<div class="form-2 & colums">
			<div style=" padding-bottom: 10px;" >
				<h3>Wie haben Sie von uns erfahren?</h3>
			</div>
			<div>
				<!-- Empty -->
			</div>
			<div class="radio_highlight">
				<input style="width:auto;" type="radio" name="checkboxFeedback"> <span>M체ndl. Empfehlung</span></input>
			</div>
			<div class="radio_highlight">
				<input style="width:auto;" type="radio" name="checkboxFeedback"> <span>Ricardo-Newsletter</span></input>
			</div>
			<div class="radio_highlight">
				<input style="width:auto;" type="radio" name="checkboxFeedback"> <span>Facebook / Instagram</span></input>
			</div>
			<div class="radio_highlight">
				<input style="width:auto;" type="radio" name="checkboxFeedback"> <span>Flyer</span></input>
			</div>
			<div style="padding-top:5px;">
				<label> Weitere: </label>
				<input style="width:auto; padding-top:15px;" type="text"> </input>
			</div>
		</div>
		<div style="padding-top: 20px;">
			<h2>AGBs</h2>
		</div>
		<div style="padding-top: 20px;">
			<label>
				Mit Ihrer Unterschrift best채tigen Sie die Richtigkeit Ihrer Angaben und akzeptieren unsere AGB (siehe E-Mail Anhang). 
				Ihre Angaben werden zu keinem Zeitpunkt an Dritte weitergegeben. Ihre Mailadresse kann, bei Ver채nderungen unserer AGB oder Dienstleistung, zu Informationszwecken verwendet werden.
			</label>
		</div>
		<div style="padding-top: 20px; font-weight: bold;">
			<h4>Unterschrift</h4>
		</div>
		<div  class="flex-row" >
			<div class="wrapper" style="padding-bottom: 10px;">
				<canvas id="signature-pad" height="100"></canvas>
			</div>
		</div>
		<div>
			<button type="submit" id="submit" class="btn btn-default" >Submit</button>
			<button onclick="window.location=String(CreateEmailElement()); return false;" id="submit2" class="btn btn-default" >F체r Mitarbeiter</button>
		</div>

		<script id="rendered-js">
		function saveForm() {
		var name = document.getElementById('fname').value + ' ' + document.getElementById('lname').value;
		html2canvas(document.querySelector('.testbox'), {
		allowTaint: true,
		foreignObjectRendering: true,
		useCORS: true,
		onrendered: function (canvas) {
		//document.body.appendChild(canvas);
		return Canvas2Image.saveAsPNG(canvas, canvas.width, canvas.height, name);
		} });

		};
		//# sourceURL=pen.js
		</script>
	  </form>
	</div>

	<script type="text/javascript" >      
	var canvas = document.getElementById("signature-pad");
	var signaturePad = new SignaturePad(canvas, {
	backgroundColor: 'rgb(250,250,250)'
	});

	document.getElementById("clear").addEventListener('click', function(){
	signaturePad.clear();
	})

	function SaveAndSend()
	{
	  saveForm();
	  CreateEmailElement();
	}


	function showMe (box) 
	{
	  var divs = document.getElementsByName('hidden')
	  var checkbox = document.getElementById("checkbox_alternative_address")
	  for(var i=0;i<divs.length;i++) { 
		if(checkbox.checked == true) {
		  divs[i].style.display = "block";
		  }
		else{
		  divs[i].style.display = "none";
			  }
			}
	}
	function CreateEmailElement() 
	{
		var gender = document.getElementsByName("gender");
		var selectedGender;

		for(var i = 0; i < gender.length; i++) {
			if(gender[i].checked)
			   selectedGender = gender[i].value;
			}

		var link = document.getElementById('email_send');
		var name = document.getElementById('fname').value + ' ' + document.getElementById('lname').value;
		var anrede = selectedGender;
		if(selectedGender == "Frau")
		{
			message = "Sehr geehrte " + anrede + " " + name;
		}
		else
		{
			message = "Sehr geehrter " + anrede + " " + name;
		}
		var subject = 'Neuanmeldung und AGBs';
		var email = document.getElementById('eaddress').value;

		var attachement = "<mailto:" + encodeURIComponent(email) + "&subject=" + encodeURIComponent(subject) + "&body=" + encodeURIComponent(message) + ">";	  
		var action = "mailto:" + "zuerich@projekt-restwert.ch" + "&subject=" + "Neuerfassung " + encodeURIComponent(name) + "&body=" + encodeURIComponent(attachement);

		return action;
		//console.log(action);
		//link.setAttribute("action", action);
	}   

	</script>

	</body>
</html>
